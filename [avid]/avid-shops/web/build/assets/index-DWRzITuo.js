import{r as v,j as e,v as G,w as X,c as K,x as U,R as Z}from"./vendor-4s8YC0ph.js";import{T as ee,a as L,G as q,b as M,N as te,n as A,A as se,S as H,c as $,B as R,d as I,u as ne,C as O,L as ae,e as B,f as re,M as oe,g as ie}from"./mantine-CWvy7d7o.js";import{F as b,f as F,a as E,b as ce,c as le,d as de,e as J}from"./fortawesome-Dw7FuQIJ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const T=()=>!window.invokeNative,ue=()=>{};function Y(t){return t.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")}const P=(t,s)=>{const r=v.useRef(ue);v.useEffect(()=>{r.current=s},[s]),v.useEffect(()=>{const a=n=>{const{action:o,data:d}=n.data;r.current&&o===t&&r.current(d)};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[t])};async function W(t,s,r){const a={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(s)};if(T()&&r)return r;const n=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";return await(await fetch(`https://${n}/${t}`,a)).json()}const he=v.createContext(null),fe=({children:t})=>{const[s,r]=v.useState(!1);return P("setVisible",r),v.useEffect(()=>{if(!s)return;const a=n=>{["Escape"].includes(n.code)&&(T()?r(!s):W("hideFrame"))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[s]),e.jsx(he.Provider,{value:{visible:s,setVisible:r},children:e.jsx(ee,{mounted:s,transition:"pop",duration:200,timingFunction:"ease",children:a=>e.jsx("div",{style:{height:"100%",...a},children:t})})})},k=G(t=>({Weight:null,MaxWeight:null,Money:{Cash:null,Bank:null},Job:{name:null,grade:null},Licenses:null,setSelfData:s=>{s.weight&&t(()=>({Weight:s.weight})),s.maxWeight&&t(()=>({MaxWeight:s.maxWeight})),s.money&&t(()=>({Money:s.money})),s.job&&t(()=>({Job:s.job})),s.licenses&&t(()=>({Licenses:s.licenses}))}})),S=G((t,s)=>({CurrentShop:null,ShopItems:null,categorizedItems:{},CartItems:[],cartWeight:0,cartValue:0,setCurrentShop:r=>{t(()=>({CurrentShop:r}))},setShopItems:r=>{const a={};r.forEach(n=>{const o=n.category||"Misc";a[o]||(a[o]=[]),a[o].push(n)}),t(()=>({ShopItems:[...r],categorizedItems:a}))},addItemToCart:(r,a)=>{const{CartItems:n,cartWeight:o,cartValue:d}=s(),p=n.findIndex(i=>i.id===r.id);let j=o+r.weight*(a||1),c=d+r.price*(a||1);if(p>=0){const i=n.map((f,g)=>g===p?{...f,quantity:f.quantity+(a||1)}:f);t(()=>({CartItems:i,cartWeight:j,cartValue:c}))}else{const i={id:r.id,name:r.name,quantity:a||1,weight:r.weight,price:r.price};t(()=>({CartItems:[...n,i],cartWeight:j,cartValue:c}))}},removeItemFromCart:(r,a,n=!1)=>{const{CartItems:o,cartWeight:d,cartValue:p,getShopItemData:j}=s(),c=o.findIndex(i=>i.id===r);if(c>=0){const i=o[c],f=j(i.id);let g=f.weight*(n?i.quantity:a||1),N=f.price*(n?i.quantity:a||1);if(i.quantity>1&&!n){const l=o.map((u,h)=>h===c?{...u,quantity:u.quantity-(a||1)}:u);t(()=>({CartItems:l,cartWeight:d-g,cartValue:p-N}))}else{const l=o.filter((u,h)=>h!==c);t(()=>({CartItems:l,cartWeight:d-g,cartValue:p-N}))}}},clearCart:()=>{t(()=>({CartItems:[],cartWeight:0,cartValue:0}))},getShopItemData:r=>{const{ShopItems:a}=s();if(a)return a.find(n=>n.id===r)}}));function xe(){const{setShopItems:t,setCurrentShop:s,clearCart:r}=S(),{setSelfData:a}=k();P("setSelfData",a),P("setCurrentShop",s),P("setShopItems",n=>{n&&t(n),r()})}const me="_root_t60sn_1",ge="_description_t60sn_9",pe="_title_t60sn_10",je="_closeButton_t60sn_14",z={root:me,description:ge,title:pe,closeButton:je},V=t=>(t*=.001,Math.round(t*100)/100);function D(t,s){if(s)return"You cannot carry all the items in the cart.";if(!t)return"You cannot afford all the items in the cart."}function ye(){const{CartItems:t,getShopItemData:s,cartWeight:r}=S(),{Money:a,Weight:n,MaxWeight:o}=k(),{ShopItems:d,CurrentShop:p,clearCart:j,setShopItems:c}=S(),[i,f]=v.useState(!1),[g,N]=v.useState(!1),l=(t==null?void 0:t.reduce((x,m)=>x+s(m.id).price*m.quantity,0))<=a.Cash,u=(t==null?void 0:t.reduce((x,m)=>x+s(m.id).price*m.quantity,0))<=a.Bank,h=n+r>o;function y(){const x=d.map(m=>{const w=t.find(C=>C.id===m.id);return w&&m.count!==void 0?{...m,count:m.count-w.quantity}:m});c(x),j()}return e.jsxs("div",{className:"flex w-full flex-col justify-between",children:[(i||g)&&e.jsx("div",{className:"container"}),e.jsxs("div",{className:"flex w-full",children:[e.jsx($,{label:D(l,h)||"Pay with Cash",color:l&&!h&&"green"||"red",withArrow:!0,hidden:!t||t.length==0,children:e.jsx(R,{className:"grow",color:"green",size:"lg",variant:"light",loading:i,disabled:!t||t.length==0||!l||g||h,style:{borderBottomRightRadius:0,borderTopRightRadius:0},onClick:()=>{f(!0),W("purchaseItems",{items:t,shop:p,currency:"cash"},!0).then(x=>{f(!1),x&&(y(),j())})},children:e.jsx(b,{size:"lg",icon:E})})}),e.jsx($,{label:D(u,h)||"Pay with Card",color:u&&!h&&"blue"||"red",withArrow:!0,hidden:!t||t.length==0,children:e.jsx(R,{className:"grow",color:"blue",size:"lg",variant:"light",loading:g,disabled:!t||t.length==0||!u||i||h,style:{borderBottomLeftRadius:0,borderTopLeftRadius:0},onClick:()=>{N(!0),W("purchaseItems",{items:t,shop:p,currency:"card"},!0).then(x=>{N(!1),x&&(y(),j())})},children:e.jsx(b,{size:"lg",icon:J})})})]}),e.jsxs("p",{className:"mt-1 flex items-center justify-center gap-1 rounded-sm bg-indigo-800/25 px-2 py-1 text-lg font-medium text-indigo-400",children:[e.jsx(b,{size:"xs",icon:F}),e.jsx(I,{value:V(n),suffix:"kg",thousandSeparator:!0}),r>0&&e.jsx("span",{className:"font-bold",children:e.jsx(I,{value:V(r),prefix:" + ",suffix:"kg",thousandSeparator:!0})})," / ",e.jsx(I,{value:V(o),suffix:"kg",thousandSeparator:!0})]})]})}function we(){const{CartItems:t,addItemToCart:s,removeItemFromCart:r,getShopItemData:a,cartWeight:n}=S(),{Money:o,Weight:d,MaxWeight:p}=k(),j=t==null?void 0:t.map(c=>{const i=a(c.id);var f=i.price,g=e.jsx(L,{order:5,children:i.label});const N=l=>{if(l===c.quantity)return;const u=t.reduce((w,C)=>w+a(C.id).price*C.quantity,0)+f*(l-c.quantity),h=d+n+(i.weight||0)*(l-c.quantity),y=u<=o.Cash,x=u<=o.Bank;if(h>p){A.show({title:"Too Heavy",message:`You cannot add anymore of: ${i.label} to your cart, it's too heavy!`,icon:e.jsx(b,{icon:F}),color:"red",classNames:z});return}if(!y&&!x){A.show({title:"Cannot Afford",message:`You cannot add anymore of: ${i.label} to your cart, you cannot afford it!`,icon:e.jsx(b,{icon:E}),color:"red",classNames:z});return}l>c.quantity?s(a(c.id),l-c.quantity):r(c.id,c.quantity-l)};return e.jsx("div",{className:"mx-1 p-2",children:e.jsxs(q,{w:"100%",justify:"space-between",wrap:"nowrap",children:[g,e.jsxs(q,{justify:"flex-end",ml:"auto",children:[e.jsxs(M,{fz:18,fw:500,children:["$",Y(f*c.quantity)]}),e.jsxs(q,{gap:6,children:[e.jsx(te,{w:60,size:"xs",value:c.quantity,max:i.count,clampBehavior:"strict",startValue:1,onChange:N,isAllowed:l=>{const u=t.reduce((w,C)=>w+a(C.id).price*C.quantity,0)+f*(l.floatValue-c.quantity),h=d+n+(i.weight||0)*(l.floatValue-c.quantity),y=u<=o.Cash,x=u<=o.Bank;return h>p?(A.show({title:"Too Heavy",message:`You cannot add anymore of: ${i.label} to your cart, it's too heavy!`,icon:e.jsx(b,{icon:F}),color:"red",classNames:z}),!1):!y&&!x?(A.show({title:"Cannot Afford",message:`You cannot add anymore of: ${i.label} to your cart, you cannot afford it!`,icon:e.jsx(b,{icon:E}),color:"red",classNames:z}),!1):!0},min:1,allowDecimal:!1,allowNegative:!1}),e.jsx(se,{color:"red",variant:"light",onClick:()=>{r(c.id,null,!0)},children:e.jsx(b,{icon:ce})})]})]})]})},c.id)});return e.jsxs("div",{className:"flex h-full w-[25%] min-w-[25%] flex-col justify-between gap-1",children:[e.jsxs("div",{className:"flex justify-between gap-1",children:[e.jsxs(q,{gap:10,mx:4,children:[e.jsx(b,{size:"lg",icon:le}),e.jsx(L,{order:3,children:"Cart"})]}),e.jsxs(M,{fz:18,fw:500,mx:4,children:[e.jsx(M,{fw:700,fz:19,component:"span",children:"Total: "}),"$",Y((t==null?void 0:t.reduce((c,i)=>c+a(i.id).price*i.quantity,0))||0)]})]}),e.jsx("div",{className:`flex h-0 grow flex-col gap-3 ${(t==null?void 0:t.length)>0&&"overflow-y-auto"}`,children:(t==null?void 0:t.length)<=0?e.jsxs("div",{className:"my-auto flex flex-col items-center gap-1",children:[e.jsx(b,{icon:de,size:"2x"}),e.jsx("h1",{className:"text-2xl font-bold",children:"No Items in Cart"})]}):e.jsx(H,{h:"100%",scrollbarSize:4,children:j})}),e.jsx(ye,{})]})}function be(t){const{item:s}=t,{addItemToCart:r,cartValue:a,cartWeight:n,CartItems:o}=S(),{Weight:d,MaxWeight:p,Money:j,Licenses:c,Job:i}=k(),f=a+s.price>j.Cash&&a+s.price>j.Bank,g=d+n+s.weight>p,N=o.reduce((w,C)=>C.id===s.id?w+C.quantity:w,0),l=s.count===void 0||s.count>N,u=!s.license&&!0||(c&&c[s.license])===!0,h=!s.jobs||s.jobs&&s.jobs[i.name]&&s.jobs[i.name]<=i.grade,y=f||g||!l||!u||!h,{hovered:x,ref:m}=ne();return e.jsx($,{label:!u&&"You need a "+s.license+" license to purchase this item."||f&&"You cannot afford this item."||g&&"You cannot carry this item."||!l&&"This item is out of stock."||!h&&"You don't have the correct job and rank to purchase this item",disabled:!f&&!g&&u&&h&&l,children:e.jsxs("div",{ref:m,className:`flex h-full grow flex-col justify-between rounded-sm bg-neutral-800 p-2 transition-all ${y?"":"hover:bg-neutral-600/20"} ${y?"bg-opacity-20":"bg-opacity-80"} ${y?"cursor-not-allowed":"cursor-pointer"} ${y?"grayscale":""} ${x&&!y?"scale-105 shadow-md":""}`,onClick:()=>{y||r(s)},children:[e.jsxs("div",{className:"mx-auto flex w-full items-center justify-between gap-2",children:[e.jsxs("p",{className:"text-lg font-semibold",children:["$",s.price]}),s.count!==void 0&&e.jsxs("p",{className:"text-lg font-semibold",children:[s.count,"x"]})]}),e.jsx("div",{className:"m-auto h-[80%]",children:e.jsx("img",{onError:w=>{console.log(w),w.currentTarget.src="./Box.png"},className:"h-full w-full object-contain",src:s.imagePath,alt:s.label})}),e.jsx("p",{className:"text-md text-center font-semibold",children:s.label})]})})}function ve(t){const{tab:s}=t,{categorizedItems:r}=S(),a=v.useMemo(()=>{var n;return(n=r[s])==null?void 0:n.map(o=>e.jsx(be,{item:o},o.id))},[r,s]);return e.jsx(H,{scrollbarSize:4,className:"h-0 grow pb-4",children:e.jsx("div",{className:"grid h-0 w-full grow grid-cols-7 gap-3 px-4",children:a})})}function Ce(){const{ShopItems:t,categorizedItems:s}=S(),[r,a]=v.useState(Object.keys(s)[0]||"Misc");return v.useEffect(()=>{a(Object.keys(s)[0]||"Misc")},[s]),t?t.length<=0?e.jsx(O,{h:"100%",children:e.jsx(L,{children:"There are no items in this shop!"})}):e.jsxs(B,{value:r,onChange:a,className:"flex size-full flex-col",classNames:{panel:"h-0 grow flex flex-col p-0"},children:[e.jsx(B.List,{children:Object.keys(s).map(n=>e.jsx(B.Tab,{value:n,children:e.jsx(M,{fw:700,fz:15,lh:1,children:n})},n))}),e.jsx(B.Panel,{value:r,py:"md",h:"100%",w:"100%",children:e.jsx(ve,{tab:r})})]}):e.jsx(O,{h:"100%",children:e.jsx(ae,{})})}function Ne(...t){return X(K(t))}function _({className:t,...s}){return e.jsx("div",{className:Ne("animate-pulse rounded-md bg-muted",t),...s})}function Se(){const{CurrentShop:t}=S();return t?e.jsx("h1",{className:"ml-6 text-4xl font-bold",children:t==null?void 0:t.label}):e.jsxs("div",{className:"my-auto ml-6 flex h-full w-1/6 flex-col gap-2",children:[e.jsx(_,{className:"h-1/4 w-full rounded-full"}),e.jsx(_,{className:"h-1/4 w-2/3 rounded-full"}),e.jsx(_,{className:"h-1/4 w-2/3 rounded-full"})]})}function Q(){const{Money:t}=k();return Q?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("p",{className:"flex items-center gap-2 rounded-md bg-green-700/50 px-5 py-1 text-lg font-bold leading-none text-green-300",children:[e.jsx(b,{size:"xl",icon:E}),e.jsx(I,{prefix:"$",value:t.Cash,thousandSeparator:!0,decimalScale:0})]}),e.jsxs("p",{className:"flex items-center gap-2 rounded-md bg-blue-600/30 px-5 py-1 text-lg font-bold leading-none text-blue-300",children:[e.jsx(b,{size:"xl",icon:J}),e.jsx(I,{prefix:"$",value:t.Bank,thousandSeparator:!0,decimalScale:0})]})]}):null}function Ie(){return e.jsxs("div",{className:"flex size-full flex-col gap-1",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsx(Se,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{}),e.jsx(re,{size:"xl",onClick:()=>{T()||W("hideFrame")}})]})]}),e.jsxs("div",{className:"flex h-0 w-full grow items-center gap-2",children:[e.jsx(Ce,{}),e.jsx(we,{})]})]})}function We(){return xe(),e.jsx(fe,{children:e.jsx("div",{className:"flex h-screen w-screen items-center justify-center",children:e.jsx("div",{className:"h-[82vh] w-3/4 bg-neutral-900/[0.97] p-4 transition-all",children:e.jsx(Ie,{})})})})}function Te({children:t}){return e.jsx(oe,{defaultColorScheme:"dark",theme:{fontFamily:"Geist Variable",colors:{dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"]}},children:t})}T()||W("Loaded");if(T()){const t=document.getElementById("root");t.style.backgroundImage='url("https://files.jellyton.me/ShareX/2024/01/FiveM_b2802_GTAProcess_-_January15_-_22.12_-_3046.png")',t.style.backgroundSize="cover",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center"}const ke=document.getElementById("root"),qe=U(ke);qe.render(e.jsx(Z.StrictMode,{children:e.jsxs(Te,{children:[e.jsx(ie,{}),e.jsx(We,{})]})}));
